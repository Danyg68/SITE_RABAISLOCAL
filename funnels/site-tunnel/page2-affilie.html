<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Finalise ton acc√®s Affili√© Fondateur ‚Äì RabaisLocal</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&display=swap" rel="stylesheet">
</head>
<body style="margin:0;padding:0;background:#F5F8FF;">

<!-- ==========================================================
BLOC 1 - Page de paiement affili√© fondateur
========================================================== -->
<style>
  .rl-order-top {
    font-family: "Poppins", system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
    text-align: center;
    background: #fff;
    color: #1B2240;
    line-height: 1.6;
    padding: 0 20px 40px;
    position: relative;
  }

  .rl-banner-top {
    background: #3E53A5;
    color: #fff;
    font-weight: 600;
    padding: 12px 20px;
    font-size: clamp(15px, 1.4vw, 17px);
    letter-spacing: 0.4px;
    text-transform: uppercase;
    box-shadow: 0 3px 12px rgba(0,0,0,0.15);
  }

  .rl-banner-top span {
    color: #FFD500;
    font-weight: 700;
  }

  .rl-order-top h1 {
    color: #3E53A5;
    font-size: clamp(28px, 3vw, 38px);
    font-weight: 800;
    margin-top: 40px;
    margin-bottom: 14px;
  }

  .rl-order-top p {
    font-size: clamp(16px, 1.6vw, 18px);
    margin: 0 auto 20px;
    max-width: 680px;
  }

  .rl-highlight {
    color: #3E53A5;
    font-weight: 700;
  }

  .rl-order-top .video-wrapper {
    max-width: 680px;
    margin: 32px auto 0;
    border-radius: 16px;
    overflow: hidden;
    box-shadow: 0 6px 22px rgba(0,0,0,0.12);
  }

  @media (max-width: 600px) {
    .rl-order-top {
      padding: 0 14px 32px;
    }
    .rl-banner-top {
      font-size: 14px;
      padding: 10px 14px;
    }
    .rl-order-top h1 {
      font-size: 26px;
      margin-top: 30px;
    }
    .rl-order-top p {
      font-size: 16px;
    }
  }
</style>

<section class="rl-order-top">
  <div class="rl-banner-top">
    ‚ö° Offre exclusive : <span>750 places Fondateurs</span> seulement ‚Äî profite de <span>80 % de rabais</span> avant le lancement officiel de <span>janvier 2026</span> !
  </div>

  <h1>Finalise ton acc√®s <span class="rl-highlight">Affili√© Fondateur RabaisLocal</span></h1>
  <p>
    Pour seulement <span class="rl-highlight">47 $</span>, tu fais partie des
    <strong>750 premiers affili√©s fondateurs</strong> et tu obtiens ta
    <strong>trousse compl√®te RabaisLocal et le rang de b√¢tisseur</strong> (valeur de plus de 650 $).
  </p>
  <p>
    Tu recevras imm√©diatement ton lien personnel, acc√®s √† ton tableau de bord et aux diff√©rents groupes d'entraide, ton agent IA et beaucoup plus.
    <br>üéØ Tout ce qu'il faut pour b√¢tir ton revenu automatique d√®s aujourd'hui.
  </p>

  <div class="video-wrapper">
    <iframe
      width="100%"
      height="360"
      src="https://www.youtube.com/embed/aOx0oTiUJ9E"
      title="Pourquoi RabaisLocal est diff√©rent"
      frameborder="0"
      allowfullscreen
    ></iframe>
  </div>
</section>

<!-- ==========================================================
SECTION PAYPAL - INT√âGRATION SANDBOX
========================================================== -->
<style>
  #section-paiement-affilie {
    padding: 50px 20px 60px;
    background: linear-gradient(180deg, #ffffff 0%, #F5F8FF 100%);
    text-align: center;
  }

  #section-paiement-affilie h2 {
    color: #3E53A5;
    font-size: clamp(24px, 2.8vw, 32px);
    font-weight: 800;
    margin-bottom: 12px;
    font-family: "Poppins", sans-serif;
  }

  #section-paiement-affilie p {
    font-size: 17px;
    color: #4B569A;
    margin-bottom: 30px;
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
    font-family: "Poppins", sans-serif;
  }

  #paypal-button-container {
    max-width: 500px;
    margin: 0 auto;
    padding: 20px;
    background: #fff;
    border-radius: 14px;
    box-shadow: 0 6px 20px rgba(62, 83, 165, 0.1);
  }

  @media (max-width: 600px) {
    #section-paiement-affilie {
      padding: 40px 16px 50px;
    }
    #section-paiement-affilie h2 {
      font-size: 24px;
    }
    #section-paiement-affilie p {
      font-size: 16px;
    }
  }
</style>

<section id="section-paiement-affilie">
  <h2>√âtape 2 ‚Äî Active ta trousse affili√©e</h2>
  <p>Remplis le formulaire ci-dessous pour finaliser ton inscription s√©curis√©e √† <strong>1 $ CAD</strong>.</p>

  <!-- Formulaire d'inscription -->
  <div style="max-width: 600px; margin: 30px auto 0;">
    <form id="form-inscription-affilie" style="background: #fff; padding: 30px; border-radius: 14px; box-shadow: 0 6px 20px rgba(62, 83, 165, 0.1);">

      <!-- Nom complet -->
      <div style="margin-bottom: 20px;">
        <label for="nom_complet" style="display: block; font-family: 'Poppins', sans-serif; font-weight: 600; color: #1B2240; margin-bottom: 8px; font-size: 15px;">
          Nom complet *
        </label>
        <input
          type="text"
          id="nom_complet"
          name="nom_complet"
          required
          placeholder="Ex: Jean Tremblay"
          style="width: 100%; padding: 12px 16px; border: 2px solid #E0E6FF; border-radius: 8px; font-family: 'Poppins', sans-serif; font-size: 15px; transition: border-color 0.3s ease;"
          onfocus="this.style.borderColor='#3E53A5'"
          onblur="this.style.borderColor='#E0E6FF'"
        />
      </div>

      <!-- Email -->
      <div style="margin-bottom: 20px;">
        <label for="email" style="display: block; font-family: 'Poppins', sans-serif; font-weight: 600; color: #1B2240; margin-bottom: 8px; font-size: 15px;">
          Adresse courriel *
        </label>
        <input
          type="email"
          id="email"
          name="email"
          required
          placeholder="Ex: jean.tremblay@exemple.com"
          style="width: 100%; padding: 12px 16px; border: 2px solid #E0E6FF; border-radius: 8px; font-family: 'Poppins', sans-serif; font-size: 15px; transition: border-color 0.3s ease;"
          onfocus="this.style.borderColor='#3E53A5'"
          onblur="this.style.borderColor='#E0E6FF'"
        />
      </div>

      <!-- T√©l√©phone -->
      <div style="margin-bottom: 20px;">
        <label for="telephone" style="display: block; font-family: 'Poppins', sans-serif; font-weight: 600; color: #1B2240; margin-bottom: 8px; font-size: 15px;">
          Num√©ro de t√©l√©phone *
        </label>
        <input
          type="tel"
          id="telephone"
          name="telephone"
          required
          placeholder="Ex: 514-555-1234"
          style="width: 100%; padding: 12px 16px; border: 2px solid #E0E6FF; border-radius: 8px; font-family: 'Poppins', sans-serif; font-size: 15px; transition: border-color 0.3s ease;"
          onfocus="this.style.borderColor='#3E53A5'"
          onblur="this.style.borderColor='#E0E6FF'"
        />
      </div>

      <!-- Ville -->
      <div style="margin-bottom: 20px;">
        <label for="ville" style="display: block; font-family: 'Poppins', sans-serif; font-weight: 600; color: #1B2240; margin-bottom: 8px; font-size: 15px;">
          Ville *
        </label>
        <input
          type="text"
          id="ville"
          name="ville"
          required
          placeholder="Ex: Montr√©al"
          style="width: 100%; padding: 12px 16px; border: 2px solid #E0E6FF; border-radius: 8px; font-family: 'Poppins', sans-serif; font-size: 15px; transition: border-color 0.3s ease;"
          onfocus="this.style.borderColor='#3E53A5'"
          onblur="this.style.borderColor='#E0E6FF'"
        />
      </div>

      <!-- Message d'information -->
      <div style="background: #F5F8FF; padding: 15px; border-radius: 8px; margin-bottom: 25px; border-left: 4px solid #3E53A5;">
        <p style="margin: 0; font-family: 'Poppins', sans-serif; font-size: 14px; color: #4B569A; line-height: 1.6;">
          <strong>üí° Note :</strong> Apr√®s avoir compl√©t√© le paiement, tu recevras imm√©diatement ton lien personnel d'affili√© et l'acc√®s √† ton tableau de bord par courriel.
        </p>
      </div>

      <!-- Bouton PayPal -->
      <div id="paypal-button-zone" style="text-align: center;">
        <style>.pp-UEB6T5RGU53K2{text-align:center;border:none;border-radius:0.25rem;min-width:11.625rem;padding:0 2rem;height:2.625rem;font-weight:bold;background-color:#FFD140;color:#000000;font-family:"Helvetica Neue",Arial,sans-serif;font-size:1rem;line-height:1.25rem;cursor:pointer;}</style>
        <form action="https://www.paypal.com/ncp/payment/UEB6T5RGU53K2" method="post" target="_blank" style="display:inline-grid;justify-items:center;align-content:start;gap:0.5rem;">
          <input class="pp-UEB6T5RGU53K2" type="submit" value="Payer 1$ avec PayPal" />
          <img src="https://www.paypalobjects.com/images/Debit_Credit_APM.svg" alt="cards" />
          <section style="font-size: 0.75rem;"> Optimis√© par <img src="https://www.paypalobjects.com/paypal-ui/logos/svg/paypal-wordmark-color.svg" alt="paypal" style="height:0.875rem;vertical-align:middle;"/></section>
        </form>
      </div>

    </form>
  </div>
</section>

<!-- ==========================================================
BLOC 2 - Section 16 diff√©rences
========================================================== -->
<style>
  .rl-differences-section {
    background: linear-gradient(180deg, #F5F8FF 0%, #FFFFFF 100%);
    padding: 70px 20px 60px;
    font-family: "Poppins", system-ui, sans-serif;
    color: #1B2240;
    text-align: center;
  }

  .rl-differences-section h2 {
    color: #3E53A5;
    font-weight: 800;
    font-size: clamp(24px, 2.6vw, 32px);
    margin-bottom: 15px;
    display: inline-flex;
    align-items: center;
    gap: 10px;
  }

  .rl-differences-section h2::before {
    content: "üíé";
    font-size: 1.4em;
    animation: shine 2.5s infinite ease-in-out;
  }

  @keyframes shine {
    0%, 100% { opacity: 1; transform: scale(1); }
    50% { opacity: 0.6; transform: scale(1.1); }
  }

  .rl-differences-section p.subtitle {
    font-size: 16px;
    color: #4B569A;
    margin-bottom: 45px;
  }

  .rl-differences-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(230px, 1fr));
    gap: 20px;
    max-width: 1100px;
    margin: 0 auto 50px;
  }

  .rl-diff-card {
    background: #fff;
    border-radius: 16px;
    padding: 16px 20px;
    box-shadow: 0 6px 18px rgba(62, 83, 165, 0.08);
    font-size: 15.5px;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 10px;
    justify-content: flex-start;
    transition: transform 0.25s ease, box-shadow 0.25s ease;
    opacity: 0;
    transform: translateY(20px);
    text-align: left;
  }

  .rl-diff-card.visible {
    opacity: 1;
    transform: translateY(0);
  }

  .rl-diff-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 22px rgba(62, 83, 165, 0.12);
  }

  .rl-diff-card:nth-child(3n+1) { background: linear-gradient(180deg, #FFFFFF 0%, #F9FBFF 100%); }
  .rl-diff-card:nth-child(3n+2) { background: linear-gradient(180deg, #FFFFFF 0%, #F5F8FF 100%); }
  .rl-diff-card:nth-child(3n+3) { background: linear-gradient(180deg, #FFFFFF 0%, #EEF3FF 100%); }

  @media (max-width: 600px) {
    .rl-differences-section { padding: 50px 16px; text-align: left; }
    .rl-differences-grid { grid-template-columns: 1fr; gap: 14px; }
    .rl-diff-card { font-size: 15px; padding: 14px 18px; justify-content: flex-start; }
    .rl-diff-card span { display: inline-block; min-width: 22px; }
  }

  .rl-diff-footer {
    background: #E8EDFF;
    border-radius: 14px;
    padding: 22px 18px;
    max-width: 700px;
    margin: 0 auto;
    box-shadow: 0 4px 12px rgba(62, 83, 165, 0.08);
  }
  .rl-diff-footer p {
    font-weight: 600;
    color: #1B2240;
    font-size: 16px;
    margin: 0;
  }
</style>

<section class="rl-differences-section">
  <h2>Pourquoi RabaisLocal est diff√©rent</h2>
  <p class="subtitle">Voici 16 raisons qui montrent clairement que RabaisLocal n'a rien d'un MLM traditionnel üëá</p>

  <div class="rl-differences-grid">
    <div class="rl-diff-card">üíé 1. Aucun achat obligatoire</div>
    <div class="rl-diff-card">üí∏ 2. Z√©ro frais de tes poches</div>
    <div class="rl-diff-card">ü§ù 3. Commissions √† vie sur tes r√©f√©rences</div>
    <div class="rl-diff-card">üö´ 4. Aucun recrutement obligatoire</div>
    <div class="rl-diff-card">‚öôÔ∏è 5. Automatisation compl√®te gr√¢ce √† l'IA</div>
    <div class="rl-diff-card">üåé 6. Croissance contr√¥l√©e selon les r√©gions</div>
    <div class="rl-diff-card">üîí 7. Ton rang demeure aquis</div>
    <div class="rl-diff-card">üè™ 8. Un vrai impact positif pour les commerces d'ici</div>
    <div class="rl-diff-card">ü§ñ 9. Une IA qui travaille pour toi en continu</div>
    <div class="rl-diff-card">üß© 10. Mod√®le hybride unique et √©thique</div>
    <div class="rl-diff-card">üéÅ 11. Tu r√©f√®res, l'IA s'occupe de la vente</div>
    <div class="rl-diff-card">üå± 12. Revenu 100 % passif et √©volutif</div>
    <div class="rl-diff-card">üßò 13. Aucune pression de performance</div>
    <div class="rl-diff-card">üí• 14. Lancement qu√©b√©cois 100 % ind√©pendant</div>
    <div class="rl-diff-card">üéØ 15. La mission avant le profit</div>
    <div class="rl-diff-card">üí° 16. √âvolution bas√©e sur des r√©sultats concrets</div>
  </div>

  <div class="rl-diff-footer">
    <p>üí¨ Chez <strong>RabaisLocal</strong> chaque diff√©rence a un but de b√¢tir un mod√®le : <u>√©thique, durable et gagnant pour tout le monde</u>.</p>
  </div>
</section>

<!-- ==========================================================
BLOC 3 - Footer
========================================================== -->
<style>
  .rl-footer {
    background: #fff;
    border-top: 2px solid #E0E6FF;
    text-align: center;
    font-family: "Poppins", system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
    color: #444;
    padding: 35px 16px 25px;
    font-size: 14.5px;
    line-height: 1.6;
  }

  .rl-footer a {
    color: #3E53A5;
    font-weight: 600;
    text-decoration: none;
    transition: color 0.3s ease;
  }

  .rl-footer a:hover {
    color: #2E408D;
    text-decoration: underline;
  }

  .rl-footer .divider {
    margin: 0 8px;
    color: #999;
  }

  .rl-footer small {
    display: block;
    color: #777;
    margin-top: 8px;
    font-size: 13px;
  }

  @media (max-width: 600px) {
    .rl-footer {
      font-size: 13.5px;
      padding: 28px 10px 22px;
    }
  }
</style>

<footer class="rl-footer">
  <p>
    ¬© 2025 <b>RabaisLocal</b>. Tous droits r√©serv√©s.
    <span class="divider">|</span>
    <a href="https://www.rabaislocal.com/politique-confidentialite" target="_blank">Politique de confidentialit√©</a>
    <span class="divider">|</span>
    <a href="mailto:support@rabaislocal.com">support@rabaislocal.com</a>
  </p>
  <small>Plateforme 100 % qu√©b√©coise. Paiement s√©curis√© via PayPal.</small>
</footer>

<!-- ==========================================================
SCRIPTS - GESTION REF + FORMULAIRE
========================================================== -->

<script>
// ===== GESTION DU PARRAIN "REF" =====
const urlParams = new URLSearchParams(window.location.search);
let ref = urlParams.get("ref") || localStorage.getItem("rl_ref") || "0";

// Sauvegarder dans localStorage
localStorage.setItem("rl_ref", ref);

// Log pour debug
console.log("R√©f√©rence du parrain :", ref);

// ===== PROPAGATION DU REF SUR LES LIENS =====
function propagateRef() {
  const currentRef = localStorage.getItem("rl_ref") || "0";
  document.querySelectorAll("[data-append-ref='true']").forEach(link => {
    try {
      const url = new URL(link.href);
      url.searchParams.set("ref", currentRef);
      link.href = url.toString();
    } catch (e) {
      console.error("Erreur propagation REF:", e);
    }
  });
}

document.addEventListener("DOMContentLoaded", propagateRef);

// ===== VALIDATION ET ENVOI DU FORMULAIRE =====
document.addEventListener("DOMContentLoaded", function() {
  const form = document.getElementById('form-inscription-affilie');
  const paypalButtonZone = document.getElementById('paypal-button-zone');

  // Initialement, masquer le bouton PayPal
  paypalButtonZone.style.display = 'none';

  // V√©rifier si tous les champs sont remplis
  function checkFormValidity() {
    const nomComplet = document.getElementById('nom_complet').value.trim();
    const email = document.getElementById('email').value.trim();
    const telephone = document.getElementById('telephone').value.trim();
    const ville = document.getElementById('ville').value.trim();

    if (nomComplet && email && telephone && ville) {
      paypalButtonZone.style.display = 'block';

      // Envoyer les donn√©es au webhook Make.com
      const formData = {
        type: 'formulaire_affilie_avant_paiement',
        ref: ref,
        nomComplet: nomComplet,
        email: email,
        telephone: telephone,
        ville: ville,
        timestamp: new Date().toISOString()
      };

      console.log('üìã Formulaire valide, donn√©es:', formData);

      // Envoi au webhook Make.com
      fetch('https://hook.us2.make.com/x3yp1l7u7mo3uiihkajgsxexitgrq3qt', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(formData)
      })
      .then(response => {
        console.log('‚úÖ Donn√©es du formulaire envoy√©es au webhook. Status:', response.status);
      })
      .catch(err => {
        console.error('‚ùå Erreur lors de l\'envoi des donn√©es du formulaire:', err);
      });

      // Sauvegarder les donn√©es dans localStorage pour la page suivante
      localStorage.setItem('rl_affilie_nom', nomComplet);
      localStorage.setItem('rl_affilie_email', email);
      localStorage.setItem('rl_affilie_telephone', telephone);
      localStorage.setItem('rl_affilie_ville', ville);

    } else {
      paypalButtonZone.style.display = 'none';
    }
  }

  // √âcouter les changements sur tous les champs
  document.getElementById('nom_complet').addEventListener('input', checkFormValidity);
  document.getElementById('email').addEventListener('input', checkFormValidity);
  document.getElementById('telephone').addEventListener('input', checkFormValidity);
  document.getElementById('ville').addEventListener('input', checkFormValidity);

  // Emp√™cher la soumission du formulaire principal
  form.addEventListener('submit', function(e) {
    e.preventDefault();
    checkFormValidity();
  });
});

// ===== ANIMATION D'APPARITION DES CARTES =====
document.addEventListener("DOMContentLoaded", () => {
  const cards = document.querySelectorAll(".rl-diff-card");
  const observer = new IntersectionObserver(entries => {
    entries.forEach((entry, index) => {
      if (entry.isIntersecting) {
        setTimeout(() => {
          entry.target.classList.add("visible");
        }, index * 50);
      }
    });
  }, { threshold: 0.1 });

  cards.forEach(card => observer.observe(card));
});
</script>

</body>
</html>
