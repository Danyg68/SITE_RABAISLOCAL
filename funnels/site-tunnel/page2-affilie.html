<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Finalise ton acc√®s Affili√© Fondateur ‚Äì RabaisLocal</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&display=swap" rel="stylesheet">
</head>
<body style="margin:0;padding:0;background:#F5F8FF;">

<!-- ==========================================================
BLOC 1 - Page de paiement affili√© fondateur
========================================================== -->
<style>
  .rl-order-top {
    font-family: "Poppins", system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
    text-align: center;
    background: #fff;
    color: #1B2240;
    line-height: 1.6;
    padding: 0 20px 40px;
    position: relative;
  }

  .rl-banner-top {
    background: #3E53A5;
    color: #fff;
    font-weight: 600;
    padding: 12px 20px;
    font-size: clamp(15px, 1.4vw, 17px);
    letter-spacing: 0.4px;
    text-transform: uppercase;
    box-shadow: 0 3px 12px rgba(0,0,0,0.15);
  }

  .rl-banner-top span {
    color: #FFD500;
    font-weight: 700;
  }

  .rl-order-top h1 {
    color: #3E53A5;
    font-size: clamp(28px, 3vw, 38px);
    font-weight: 800;
    margin-top: 40px;
    margin-bottom: 14px;
  }

  .rl-order-top p {
    font-size: clamp(16px, 1.6vw, 18px);
    margin: 0 auto 20px;
    max-width: 680px;
  }

  .rl-highlight {
    color: #3E53A5;
    font-weight: 700;
  }

  .rl-order-top .video-wrapper {
    max-width: 680px;
    margin: 32px auto 0;
    border-radius: 16px;
    overflow: hidden;
    box-shadow: 0 6px 22px rgba(0,0,0,0.12);
  }

  @media (max-width: 600px) {
    .rl-order-top {
      padding: 0 14px 32px;
    }
    .rl-banner-top {
      font-size: 14px;
      padding: 10px 14px;
    }
    .rl-order-top h1 {
      font-size: 26px;
      margin-top: 30px;
    }
    .rl-order-top p {
      font-size: 16px;
    }
  }
</style>

<section class="rl-order-top">
  <div class="rl-banner-top">
    ‚ö° Offre exclusive : <span>750 places Fondateurs</span> seulement ‚Äî profite de <span>80 % de rabais</span> avant le lancement officiel de <span>janvier 2026</span> !
  </div>

  <h1>Finalise ton acc√®s <span class="rl-highlight">Affili√© Fondateur RabaisLocal</span></h1>
  <p>
    Pour seulement <span class="rl-highlight">47 $</span>, tu fais partie des
    <strong>750 premiers affili√©s fondateurs</strong> et tu obtiens ta
    <strong>trousse compl√®te RabaisLocal et le rang de b√¢tisseur</strong> (valeur de plus de 650 $).
  </p>
  <p>
    Tu recevras imm√©diatement ton lien personnel, acc√®s √† ton tableau de bord et aux diff√©rents groupes d'entraide, ton agent IA et beaucoup plus.
    <br>üéØ Tout ce qu'il faut pour b√¢tir ton revenu automatique d√®s aujourd'hui.
  </p>

  <div class="video-wrapper">
    <iframe
      width="100%"
      height="360"
      src="https://www.youtube.com/embed/aOx0oTiUJ9E"
      title="Pourquoi RabaisLocal est diff√©rent"
      frameborder="0"
      allowfullscreen
    ></iframe>
  </div>
</section>

<!-- ==========================================================
SECTION PAIEMENT - BOUTON PAYPAL H√âBERG√â
========================================================== -->
<style>
  #section-paiement-affilie {
    padding: 50px 20px 60px;
    background: linear-gradient(180deg, #ffffff 0%, #F5F8FF 100%);
    text-align: center;
  }

  #section-paiement-affilie h2 {
    color: #3E53A5;
    font-size: clamp(24px, 2.8vw, 32px);
    font-weight: 800;
    margin-bottom: 12px;
    font-family: "Poppins", sans-serif;
  }

  #section-paiement-affilie p {
    font-size: 17px;
    color: #4B569A;
    margin-bottom: 30px;
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
    font-family: "Poppins", sans-serif;
  }

  .paypal-info-box {
    background: #FFF9E6;
    border-left: 4px solid #FFD140;
    padding: 18px 20px;
    border-radius: 8px;
    margin: 25px auto;
    max-width: 550px;
    text-align: left;
  }

  .paypal-info-box p {
    margin: 8px 0;
    font-size: 15px;
    color: #1B2240;
    line-height: 1.7;
  }

  .paypal-info-box strong {
    color: #3E53A5;
  }

  @media (max-width: 600px) {
    #section-paiement-affilie {
      padding: 40px 16px 50px;
    }
    #section-paiement-affilie h2 {
      font-size: 24px;
    }
    #section-paiement-affilie p {
      font-size: 16px;
    }
    .paypal-info-box {
      padding: 15px 18px;
    }
    .paypal-info-box p {
      font-size: 14px;
    }
  }
</style>

<section id="section-paiement-affilie">
  <h2>√âtape 2 ‚Äî Active ta trousse affili√©e</h2>
  <p>Remplis le formulaire ci-dessous pour finaliser ton inscription s√©curis√©e √† <strong>47 $ CAD</strong>.</p>

  <!-- Formulaire d'inscription -->
  <div style="max-width: 600px; margin: 30px auto 0;">
    <form id="form-inscription-affilie" style="background: #fff; padding: 30px; border-radius: 14px; box-shadow: 0 6px 20px rgba(62, 83, 165, 0.1);">

      <!-- Champ cach√© pour la r√©f√©rence -->
      <input type="hidden" id="ref" name="ref" value="" />

      <!-- Pr√©nom -->
      <div style="margin-bottom: 20px;">
        <label for="prenom" style="display: block; font-family: 'Poppins', sans-serif; font-weight: 600; color: #1B2240; margin-bottom: 8px; font-size: 15px;">
          Pr√©nom *
        </label>
        <input
          type="text"
          id="prenom"
          name="prenom"
          required
          placeholder="Ex: Jean"
          style="width: 100%; padding: 12px 16px; border: 2px solid #E0E6FF; border-radius: 8px; font-family: 'Poppins', sans-serif; font-size: 15px; transition: border-color 0.3s ease;"
          onfocus="this.style.borderColor='#3E53A5'"
          onblur="this.style.borderColor='#E0E6FF'"
        />
      </div>

      <!-- Nom -->
      <div style="margin-bottom: 20px;">
        <label for="nom" style="display: block; font-family: 'Poppins', sans-serif; font-weight: 600; color: #1B2240; margin-bottom: 8px; font-size: 15px;">
          Nom *
        </label>
        <input
          type="text"
          id="nom"
          name="nom"
          required
          placeholder="Ex: Tremblay"
          style="width: 100%; padding: 12px 16px; border: 2px solid #E0E6FF; border-radius: 8px; font-family: 'Poppins', sans-serif; font-size: 15px; transition: border-color 0.3s ease;"
          onfocus="this.style.borderColor='#3E53A5'"
          onblur="this.style.borderColor='#E0E6FF'"
        />
      </div>

      <!-- Email -->
      <div style="margin-bottom: 20px;">
        <label for="email" style="display: block; font-family: 'Poppins', sans-serif; font-weight: 600; color: #1B2240; margin-bottom: 8px; font-size: 15px;">
          Adresse courriel *
        </label>
        <input
          type="email"
          id="email"
          name="email"
          required
          placeholder="Ex: jean.tremblay@exemple.com"
          style="width: 100%; padding: 12px 16px; border: 2px solid #E0E6FF; border-radius: 8px; font-family: 'Poppins', sans-serif; font-size: 15px; transition: border-color 0.3s ease;"
          onfocus="this.style.borderColor='#3E53A5'"
          onblur="this.style.borderColor='#E0E6FF'"
        />
      </div>

      <!-- T√©l√©phone -->
      <div style="margin-bottom: 20px;">
        <label for="telephone" style="display: block; font-family: 'Poppins', sans-serif; font-weight: 600; color: #1B2240; margin-bottom: 8px; font-size: 15px;">
          Num√©ro de t√©l√©phone *
        </label>
        <input
          type="tel"
          id="telephone"
          name="telephone"
          required
          placeholder="Ex: 514-555-1234"
          style="width: 100%; padding: 12px 16px; border: 2px solid #E0E6FF; border-radius: 8px; font-family: 'Poppins', sans-serif; font-size: 15px; transition: border-color 0.3s ease;"
          onfocus="this.style.borderColor='#3E53A5'"
          onblur="this.style.borderColor='#E0E6FF'"
        />
      </div>

      <!-- R√©f√©r√© par -->
      <div style="margin-bottom: 20px;">
        <label for="referer" style="display: block; font-family: 'Poppins', sans-serif; font-weight: 600; color: #1B2240; margin-bottom: 8px; font-size: 15px;">
          R√©f√©r√© par (optionnel)
        </label>
        <input
          type="text"
          id="referer"
          name="referer"
          placeholder="Nom ou code de la personne qui t'a r√©f√©r√©"
          style="width: 100%; padding: 12px 16px; border: 2px solid #E0E6FF; border-radius: 8px; font-family: 'Poppins', sans-serif; font-size: 15px; transition: border-color 0.3s ease;"
          onfocus="this.style.borderColor='#3E53A5'"
          onblur="this.style.borderColor='#E0E6FF'"
        />
      </div>

      <!-- Bouton de soumission du formulaire d'inscription -->
      <button type="button" id="btn-submit-inscription" style="width: 100%; padding: 14px 20px; background: linear-gradient(135deg, #3E53A5 0%, #5068C4 100%); color: #fff; border: none; border-radius: 8px; font-family: 'Poppins', sans-serif; font-size: 16px; font-weight: 700; cursor: pointer; box-shadow: 0 4px 12px rgba(62, 83, 165, 0.3); transition: all 0.3s ease; margin-bottom: 20px;">
        Valider et passer au paiement PayPal ‚Üí
      </button>

    </form>

    <!-- Message d'information paiement -->
    <div class="paypal-info-box">
      <p><strong>üîê Comment √ßa fonctionne :</strong></p>
      <p>‚úì Une fen√™tre PayPal va s'ouvrir pour compl√©ter votre paiement s√©curis√©.</p>
      <p>‚úì Une fois le paiement compl√©t√©, vous serez automatiquement redirig√© vers la page de confirmation.</p>
      <p>‚úì Vous recevrez imm√©diatement votre lien d'affili√© et l'acc√®s √† votre tableau de bord par courriel.</p>
    </div>

    <!-- Bouton PayPal H√©berg√© -->
    <div id="paypal-button-zone" style="text-align: center;">
      <div>
        <style>.pp-UEB6T5RGU53K2{text-align:center;border:none;border-radius:0.25rem;min-width:11.625rem;padding:0 2rem;height:2.625rem;font-weight:bold;background-color:#FFD140;color:#000000;font-family:"Helvetica Neue",Arial,sans-serif;font-size:1rem;line-height:1.25rem;cursor:pointer;}</style>
        <form id="paypal-hosted-form" action="https://www.paypal.com/ncp/payment/UEB6T5RGU53K2" method="post" target="paypal_popup" style="display:inline-grid;justify-items:center;align-content:start;gap:0.5rem;">
          <input type="hidden" name="custom" value="" id="paypal-custom-id" />
          <input type="hidden" name="return" value="https://marketing.rabaislocal.com/page2_form_affilie.html" />
          <input type="hidden" name="cancel_return" value="https://marketing.rabaislocal.com/page2-affilie.html" />
          <input class="pp-UEB6T5RGU53K2" type="submit" value="Acheter" />
          <img src="https://www.paypalobjects.com/images/Debit_Credit_APM.svg" alt="cards" />
          <section style="font-size: 0.75rem;">Optimis√© par <img src="https://www.paypalobjects.com/paypal-ui/logos/svg/paypal-wordmark-color.svg" alt="paypal" style="height:0.875rem;vertical-align:middle;"/></section>
        </form>
      </div>
    </div>
  </div>
</section>

<!-- ==========================================================
BLOC 2 - Section 16 diff√©rences
========================================================== -->
<style>
  .rl-differences-section {
    background: linear-gradient(180deg, #F5F8FF 0%, #FFFFFF 100%);
    padding: 70px 20px 60px;
    font-family: "Poppins", system-ui, sans-serif;
    color: #1B2240;
    text-align: center;
  }

  .rl-differences-section h2 {
    color: #3E53A5;
    font-weight: 800;
    font-size: clamp(24px, 2.6vw, 32px);
    margin-bottom: 15px;
    display: inline-flex;
    align-items: center;
    gap: 10px;
  }

  .rl-differences-section h2::before {
    content: "üíé";
    font-size: 1.4em;
    animation: shine 2.5s infinite ease-in-out;
  }

  @keyframes shine {
    0%, 100% { opacity: 1; transform: scale(1); }
    50% { opacity: 0.6; transform: scale(1.1); }
  }

  .rl-differences-section p.subtitle {
    font-size: 16px;
    color: #4B569A;
    margin-bottom: 45px;
  }

  .rl-differences-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(230px, 1fr));
    gap: 20px;
    max-width: 1100px;
    margin: 0 auto 50px;
  }

  .rl-diff-card {
    background: #fff;
    border-radius: 16px;
    padding: 16px 20px;
    box-shadow: 0 6px 18px rgba(62, 83, 165, 0.08);
    font-size: 15.5px;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 10px;
    justify-content: flex-start;
    transition: transform 0.25s ease, box-shadow 0.25s ease;
    opacity: 0;
    transform: translateY(20px);
    text-align: left;
  }

  .rl-diff-card.visible {
    opacity: 1;
    transform: translateY(0);
  }

  .rl-diff-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 22px rgba(62, 83, 165, 0.12);
  }

  .rl-diff-card:nth-child(3n+1) { background: linear-gradient(180deg, #FFFFFF 0%, #F9FBFF 100%); }
  .rl-diff-card:nth-child(3n+2) { background: linear-gradient(180deg, #FFFFFF 0%, #F5F8FF 100%); }
  .rl-diff-card:nth-child(3n+3) { background: linear-gradient(180deg, #FFFFFF 0%, #EEF3FF 100%); }

  @media (max-width: 600px) {
    .rl-differences-section { padding: 50px 16px; text-align: left; }
    .rl-differences-grid { grid-template-columns: 1fr; gap: 14px; }
    .rl-diff-card { font-size: 15px; padding: 14px 18px; justify-content: flex-start; }
    .rl-diff-card span { display: inline-block; min-width: 22px; }
  }

  .rl-diff-footer {
    background: #E8EDFF;
    border-radius: 14px;
    padding: 22px 18px;
    max-width: 700px;
    margin: 0 auto;
    box-shadow: 0 4px 12px rgba(62, 83, 165, 0.08);
  }
  .rl-diff-footer p {
    font-weight: 600;
    color: #1B2240;
    font-size: 16px;
    margin: 0;
  }
</style>

<section class="rl-differences-section">
  <h2>Pourquoi RabaisLocal est diff√©rent</h2>
  <p class="subtitle">Voici 16 raisons qui montrent clairement que RabaisLocal n'a rien d'un MLM traditionnel üëá</p>

  <div class="rl-differences-grid">
    <div class="rl-diff-card">üíé 1. Aucun achat obligatoire</div>
    <div class="rl-diff-card">üí∏ 2. Z√©ro frais de tes poches</div>
    <div class="rl-diff-card">ü§ù 3. Commissions √† vie sur tes r√©f√©rences</div>
    <div class="rl-diff-card">üö´ 4. Aucun recrutement obligatoire</div>
    <div class="rl-diff-card">‚öôÔ∏è 5. Automatisation compl√®te gr√¢ce √† l'IA</div>
    <div class="rl-diff-card">üåé 6. Croissance contr√¥l√©e selon les r√©gions</div>
    <div class="rl-diff-card">üîí 7. Ton rang demeure aquis</div>
    <div class="rl-diff-card">üè™ 8. Un vrai impact positif pour les commerces d'ici</div>
    <div class="rl-diff-card">ü§ñ 9. Une IA qui travaille pour toi en continu</div>
    <div class="rl-diff-card">üß© 10. Mod√®le hybride unique et √©thique</div>
    <div class="rl-diff-card">üéÅ 11. Tu r√©f√®res, l'IA s'occupe de la vente</div>
    <div class="rl-diff-card">üå± 12. Revenu 100 % passif et √©volutif</div>
    <div class="rl-diff-card">üßò 13. Aucune pression de performance</div>
    <div class="rl-diff-card">üí• 14. Lancement qu√©b√©cois 100 % ind√©pendant</div>
    <div class="rl-diff-card">üéØ 15. La mission avant le profit</div>
    <div class="rl-diff-card">üí° 16. √âvolution bas√©e sur des r√©sultats concrets</div>
  </div>

  <div class="rl-diff-footer">
    <p>üí¨ Chez <strong>RabaisLocal</strong> chaque diff√©rence a un but de b√¢tir un mod√®le : <u>√©thique, durable et gagnant pour tout le monde</u>.</p>
  </div>
</section>

<!-- ==========================================================
BLOC 3 - Footer
========================================================== -->
<style>
  .rl-footer {
    background: #fff;
    border-top: 2px solid #E0E6FF;
    text-align: center;
    font-family: "Poppins", system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
    color: #444;
    padding: 35px 16px 25px;
    font-size: 14.5px;
    line-height: 1.6;
  }

  .rl-footer a {
    color: #3E53A5;
    font-weight: 600;
    text-decoration: none;
    transition: color 0.3s ease;
  }

  .rl-footer a:hover {
    color: #2E408D;
    text-decoration: underline;
  }

  .rl-footer .divider {
    margin: 0 8px;
    color: #999;
  }

  .rl-footer small {
    display: block;
    color: #777;
    margin-top: 8px;
    font-size: 13px;
  }

  @media (max-width: 600px) {
    .rl-footer {
      font-size: 13.5px;
      padding: 28px 10px 22px;
    }
  }
</style>

<footer class="rl-footer">
  <p>
    ¬© 2025 <b>RabaisLocal</b>. Tous droits r√©serv√©s.
    <span class="divider">|</span>
    <a href="https://www.rabaislocal.com/politique-confidentialite" target="_blank">Politique de confidentialit√©</a>
    <span class="divider">|</span>
    <a href="mailto:support@rabaislocal.com">support@rabaislocal.com</a>
  </p>
  <small>Plateforme 100 % qu√©b√©coise. Paiement s√©curis√© via PayPal.</small>
</footer>

<!-- ==========================================================
SCRIPTS - GESTION REF + VALIDATION FORMULAIRE
========================================================== -->
<script>
// ===== GESTION DU PARRAIN "REF" =====
const urlParams = new URLSearchParams(window.location.search);
let ref = urlParams.get("ref") || localStorage.getItem("rl_ref") || "0";

// Sauvegarder dans localStorage
localStorage.setItem("rl_ref", ref);

// Remplir le champ cach√©
document.addEventListener("DOMContentLoaded", function() {
  document.getElementById('ref').value = ref;
});

// Log pour debug
console.log("R√©f√©rence du parrain :", ref);

// ===== PROPAGATION DU REF SUR LES LIENS =====
function propagateRef() {
  const currentRef = localStorage.getItem("rl_ref") || "0";
  document.querySelectorAll("[data-append-ref='true']").forEach(link => {
    try {
      const url = new URL(link.href);
      url.searchParams.set("ref", currentRef);
      link.href = url.toString();
    } catch (e) {
      console.error("Erreur propagation REF:", e);
    }
  });
}

document.addEventListener("DOMContentLoaded", propagateRef);

// ===== VALIDATION DU FORMULAIRE D'INSCRIPTION ET ENVOI AU WEBHOOK =====
document.addEventListener("DOMContentLoaded", function() {
  const btnSubmitInscription = document.getElementById('btn-submit-inscription');
  const formInscription = document.getElementById('form-inscription-affilie');
  const paypalHostedForm = document.getElementById('paypal-hosted-form');

  if (btnSubmitInscription && formInscription && paypalHostedForm) {
    btnSubmitInscription.addEventListener('click', function(e) {
      e.preventDefault();

      // Valider le formulaire d'inscription
      if (!formInscription.checkValidity()) {
        formInscription.reportValidity();
        return;
      }

      // G√©n√©rer un ID unique pour lier le formulaire et le paiement PayPal
      const uniqueId = 'RL-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9);

      // Injecter l'ID unique dans le champ cach√© PayPal
      document.getElementById('paypal-custom-id').value = uniqueId;

      // R√©cup√©rer les donn√©es du formulaire d'inscription
      const prenom = document.getElementById('prenom').value.trim();
      const nom = document.getElementById('nom').value.trim();
      const email = document.getElementById('email').value.trim();
      const telephone = document.getElementById('telephone').value.trim();
      const referer = document.getElementById('referer').value.trim();

      // Pr√©parer les donn√©es pour le webhook
      const formData = {
        type: 'formulaire_inscription_affilie',
        source: 'page2_avant_paiement',
        transaction_id: uniqueId,
        ref: ref,
        prenom: prenom,
        nom: nom,
        email: email,
        telephone: telephone,
        referer: referer,
        timestamp: new Date().toISOString()
      };

      console.log('üìã Envoi des donn√©es du formulaire d\'inscription au webhook:', formData);

      // Envoyer au webhook Make.com (sans attendre la r√©ponse)
      fetch('https://hook.us2.make.com/x3yp1l7u7mo3uiihkajgsexitgrq3qt', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(formData),
        keepalive: true
      }).then(response => {
        console.log('‚úÖ Donn√©es du formulaire d\'inscription envoy√©es. Status:', response.status);
      }).catch(err => {
        console.error('‚ùå Erreur lors de l\'envoi:', err);
      });

      // Sauvegarder dans localStorage
      localStorage.setItem('rl_affilie_prenom', prenom);
      localStorage.setItem('rl_affilie_nom', nom);
      localStorage.setItem('rl_affilie_email', email);
      localStorage.setItem('rl_affilie_telephone', telephone);
      localStorage.setItem('rl_affilie_referer', referer);
      localStorage.setItem('rl_affilie_transaction_id', uniqueId);

      // Ouvrir PayPal dans un popup centr√©
      const width = 800;
      const height = 700;
      const left = (screen.width - width) / 2;
      const top = (screen.height - height) / 2;

      window.open('', 'paypal_popup',
        'width=' + width +
        ',height=' + height +
        ',top=' + top +
        ',left=' + left +
        ',resizable=yes,scrollbars=yes,status=yes'
      );

      // Soumettre le formulaire PayPal dans le popup
      paypalHostedForm.submit();
    });
  }
});

// ===== ANIMATION D'APPARITION DES CARTES =====
document.addEventListener("DOMContentLoaded", () => {
  const cards = document.querySelectorAll(".rl-diff-card");
  const observer = new IntersectionObserver(entries => {
    entries.forEach((entry, index) => {
      if (entry.isIntersecting) {
        setTimeout(() => {
          entry.target.classList.add("visible");
        }, index * 50);
      }
    });
  }, { threshold: 0.1 });

  cards.forEach(card => observer.observe(card));
});
</script>

</body>
</html>
